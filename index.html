<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DBcolor - An√°lise Double</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <h1>üéØ DBcolor - An√°lise Double</h1>
        <div class="header-right">
          <div class="user-info" id="userInfo" style="display: none">
            <div class="user-details">
              <span id="userEmail"></span>
              <span id="userBankroll"></span>
            </div>
            <div class="user-actions">
              <button id="btnSettings" class="settings-btn">‚öôÔ∏è Config</button>
              <button id="btnLogout" class="logout-btn">Logout</button>
            </div>
          </div>
          <div class="status-indicator">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Conectando...</span>
          </div>
        </div>
      </header>

      <!-- Estat√≠sticas -->
      <section class="stats-section">
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">Total</div>
            <div class="stat-value" id="statTotal">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Wins</div>
            <div class="stat-value" id="statWins">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Loss</div>
            <div class="stat-value" id="statLosses">0</div>
          </div>
          <div class="stat-card red">
            <div class="stat-label">Vermelho</div>
            <div class="stat-value" id="statRed">0</div>
          </div>
          <div class="stat-card black">
            <div class="stat-label">Preto</div>
            <div class="stat-value" id="statBlack">0</div>
          </div>
          <div class="stat-card white">
            <div class="stat-label">Branco</div>
            <div class="stat-value" id="statWhite">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Sequ√™ncia Atual</div>
            <div class="stat-value" id="statStreak">-</div>
          </div>
        </div>
      </section>

      <!-- Game iframe (embed) -->
      <section class="game-section">
        <div class="game-container">
          <!-- Some casinos block embedding via X-Frame-Options; add a fallback link below -->
          <iframe
            id="playnaIframe"
            src="https://playnabets.com/casino/soline/mobi_Dobrar"
            title="Playna Bets - Soline"
            loading="lazy"
            referrerpolicy="no-referrer"
            allowfullscreen></iframe>
        </div>
        <div
          style="
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
          ">
          Se o jogo n√£o carregar, abra em nova guia:
          <a
            href="https://playnabets.com/casino/soline/mobi_Dobrar"
            target="_blank"
            rel="noopener noreferrer"
            >Abrir Playna Bets</a
          >
        </div>
      </section>

      <!-- Sinal Atual -->
      <section class="signal-section" id="signalSection" style="display: block">
        <div class="signal-card" id="signalCard" tabindex="-1">
          <div class="signal-header">
            <span class="signal-badge" id="signalBadge">SINAL</span>
            <span class="signal-confidence" id="signalConfidence"></span>
          </div>
          <div
            class="signal-pending"
            id="signalPendingStatus"
            style="
              display: none;
              margin-top: 6px;
              font-weight: 600;
              color: #ff9800;
            ">
            Aguardando resolu√ß√£o...
          </div>
          <div class="signal-description" id="signalDescription">
            Analisando padr√µes, aguarde!
          </div>
          <div class="signal-details">
            <div class="signal-info">
              <strong>Aposta Sugerida:</strong>
              <div class="signal-bet-group">
                <span id="signalBet"></span>
                <span
                  id="signalColorSquare"
                  class="color-square"
                  style="display: none"></span>
              </div>
            </div>
            <div class="signal-info">
              <strong>N√∫meros:</strong>
              <span id="signalNumbers"></span>
            </div>
            <div class="signal-info">
              <strong>Probabilidade:</strong>
              <span id="signalProbability"></span>
            </div>
          </div>
          <!-- A√ß√£o sugerida removida: agora as sugest√µes num√©ricas n√£o s√£o exibidas -->
          <div class="signal-reasons" id="signalReasons"></div>
        </div>
      </section>

      <!-- Resultados Recentes -->
      <section class="results-section">
        <h2>Resultados Recentes</h2>
        <div class="results-grid" id="resultsGrid">
          <!-- Resultados ser√£o inseridos aqui via JavaScript -->
        </div>
      </section>

      <!-- √öltimo acerto / √∫ltimo loss -->
      <section class="last-signal-times-section">
        <h2>√öltimo Resultado de Sinal</h2>
        <div class="times-grid">
          <div class="time-card">
            <div class="time-label">√öltimo Acerto</div>
            <div class="time-value" id="lastWinTime">-</div>
          </div>
          <div class="time-card">
            <div class="time-label">√öltimo Loss</div>
            <div class="time-value" id="lastLossTime">-</div>
          </div>
        </div>
      </section>

      <!-- Profit simulator: calculate expected profit based on wins/losses -->
      <section class="profit-section">
        <h2>Simulador de Ganhos</h2>
        <div class="profit-card">
          <div class="profit-input">
            <label for="profitBetAmount"
              ><strong>Valor da Aposta:</strong></label
            >
            <input
              id="profitBetAmount"
              type="number"
              min="0"
              step="0.01"
              value="10" />
          </div>
          <div class="martingale-simulator">
            <div class="martingale-row">
              <label for="martingaleStreak"
                ><strong>Perdas consecutivas:</strong></label
              >
              <input
                id="martingaleStreak"
                type="number"
                min="1"
                max="10"
                value="3" />
            </div>
            <div class="martingale-row">
              <label
                for="useWinsLosses"
                title="Use as resolu√ß√µes reais (WIN/LOSS) para calcular perda acumulada e pr√≥xima aposta"
                ><strong>Baseado em Wins/Losses:</strong></label
              >
              <input id="useWinsLosses" type="checkbox" checked />
            </div>
            <div class="martingale-row">
              <label for="profitBankroll"><strong>Minha banca:</strong></label>
              <input
                id="profitBankroll"
                type="number"
                min="0"
                step="0.01"
                value="1000" />
            </div>
            <div class="martingale-results">
              <div class="martingale-row">
                <span>Sequ√™ncia:</span> <span id="martingaleSequence">-</span>
              </div>
              <div class="martingale-row">
                <span>Perda acumulada:</span>
                <span id="martingaleCumulativeLoss">-</span>
              </div>
              <div class="martingale-row">
                <span>Pr√≥xima aposta:</span>
                <span id="martingaleNextBet">-</span>
              </div>
              <div class="martingale-row">
                <span>Capital necess√°rio:</span>
                <span id="martingaleCapitalNeeded">-</span>
              </div>
              <div class="martingale-row">
                <span>Cobertura da banca:</span>
                <span id="martingaleCoverage" class="bankroll-status">-</span>
              </div>
              <div class="martingale-row">
                <span>Perdas de sinal consecutivas:</span>
                <span id="currentSignalLossStreak">0</span>
              </div>
            </div>
          </div>
          <div class="profit-results" id="profitResults">
            <div class="profit-row">
              <span>Total de Apostas:</span> <span id="profitTotalBets">0</span>
            </div>
            <div class="profit-row">
              <span>Wins:</span> <span id="profitWins">0</span>
            </div>
            <div class="profit-row">
              <span>Loss:</span> <span id="profitLosses">0</span>
            </div>
            <div class="profit-row">
              <span>Lucro L√≠quido:</span> <span id="profitNet">-</span>
            </div>
            <div class="profit-row">
              <span>Lucro por Aposta (EV):</span>
              <span id="profitPerBet">-</span>
            </div>
            <div class="profit-row">
              <span>ROI:</span> <span id="profitROI">-</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Debug controls (removed) -->

      <!-- Hist√≥rico de Sinais removido para simplificar a interface -->
      <audio
        id="signalAlertSound"
        src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
        preload="auto"></audio>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div id="settingsModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="closeSettings">&times;</span>
        <h2>Configura√ß√µes de Alertas</h2>
        <form id="settingsForm">
          <div class="form-group">
            <label>
              <input type="checkbox" id="receiveAlerts" checked />
              Receber alertas
            </label>
          </div>
          <div class="form-group">
            <label>Cores habilitadas:</label>
            <div class="checkbox-group">
              <label
                ><input type="checkbox" id="colorRed" value="red" checked />
                Vermelho</label
              >
              <label
                ><input type="checkbox" id="colorBlack" value="black" checked />
                Preto</label
              >
              <label
                ><input type="checkbox" id="colorWhite" value="white" checked />
                Branco</label
              >
            </div>
          </div>
          <div class="form-group">
            <label for="enabledPatterns"
              >Padr√µes habilitados (separados por v√≠rgula, vazio =
              todos):</label
            >
            <input
              type="text"
              id="enabledPatterns"
              placeholder="ex: color_streak, alternation" />
          </div>
          <button type="submit" class="btn-primary">Salvar</button>
        </form>
      </div>
    </div>

    <script src="app.js?v=2"></script>
  </body>
</html>
