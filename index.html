<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DBcolor - An√°lise Double</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <h1>
          DBcolor - An√°lise Double
          <span
            id="headerSquare"
            class="header-square"
            title="Estado do quadrado"></span>
        </h1>
        <div class="header-right">
          <div class="user-info" id="userInfo" style="display: none">
            <div class="user-details">
              <span id="userEmail"></span>
            </div>
            <div class="user-actions">
              <button id="btnLogout" class="logout-btn">Logout</button>
            </div>
          </div>
          <div class="status-indicator">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Conectando...</span>
          </div>
        </div>
      </header>

      <!-- Navega√ß√£o entre plataformas -->
      <nav class="platform-nav" style="display: flex; gap: 10px; margin-bottom: 16px; justify-content: center; flex-wrap: wrap;">
        <a href="/playnabet" class="platform-btn active" style="padding: 10px 20px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
          PlayNaBet
        </a>
        <a href="/" class="platform-btn" style="padding: 10px 20px; background: linear-gradient(135deg, #11998e, #38ef7d); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
          VeraBet
        </a>
        <a href="/stats" class="platform-btn" style="padding: 10px 20px; background: linear-gradient(135deg, #ff9800, #ff5722); color: white; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
          üìä Estat√≠sticas
        </a>
        <button id="btnSettings" class="platform-btn" style="padding: 10px 20px; background: linear-gradient(135deg, #546e7a, #37474f); color: white; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; transition: transform 0.2s;">
          ‚öôÔ∏è Configura√ß√µes
        </button>
      </nav>

      <!-- Estat√≠sticas -->
      <section class="stats-section">
        <div class="stats-grid">
          <div class="stat-card win">
            <div class="stat-label">Wins</div>
            <div class="stat-value" id="statWins">0</div>
            <div
              class="stat-value"
              id="statWinsPct"
              style="font-size: 0.9em; color: var(--text-secondary)">
              0%
            </div>
          </div>
          <div class="stat-card loss">
            <div class="stat-label">Loss</div>
            <div class="stat-value" id="statLosses">0</div>
          </div>
          <div class="stat-card red">
            <div class="stat-label">Vermelho</div>
            <div class="stat-value" id="statRed">0</div>
          </div>
          <div class="stat-card black">
            <div class="stat-label">Preto</div>
            <div class="stat-value" id="statBlack">0</div>
          </div>
          <div class="stat-card white">
            <div class="stat-label">Branco</div>
            <div class="stat-value" id="statWhite">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">Sequ√™ncia Atual</div>
            <div class="stat-value" id="statStreak">-</div>
          </div>
          <div class="stat-card win">
            <div class="stat-label">Sequ√™ncia de Wins Atual</div>
            <div class="stat-value" id="currentWinStreak">0</div>
          </div>
          <div class="stat-card win">
            <div class="stat-label">Maior Sequ√™ncia de Wins</div>
            <div class="stat-value" id="maxWinStreak">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">M√©dia de Wins entre Losses</div>
            <div class="stat-value" id="avgWinsBetweenLosses">0.00</div>
          </div>
          <div class="stat-card" style="border-color: #667eea; box-shadow: 0 0 15px rgba(102, 126, 234, 0.15);">
            <div class="stat-label" style="color: #667eea;">üìä √öltima Sequ√™ncia de Wins</div>
            <div class="stat-value" id="lastWinStreak" style="color: #667eea;">-</div>
            <div class="stat-label" id="lastWinStreakHistory" style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px;">Hist√≥rico: -</div>
          </div>
        </div>
      </section>
      
      <!-- Dicas de Padr√µes -->
      <section class="pattern-tips-section" style="margin-bottom: 20px;">
        <div style="display: flex; gap: 16px; flex-wrap: wrap; justify-content: center;">
          <div id="bestPatternCard" class="stat-card" style="flex: 1; min-width: 200px; max-width: 300px; border: 2px solid #00ff88; background: linear-gradient(145deg, rgba(0,255,136,0.1), transparent);">
            <div class="stat-label" style="color: #00ff88;">üî• Melhor Padr√£o (7 dias)</div>
            <div class="stat-value" id="bestPatternName" style="font-size: 1.1rem; color: #00ff88;">-</div>
            <div style="font-size: 0.85rem; color: var(--text-secondary);">
              Taxa: <span id="bestPatternRate">-</span>% | <span id="bestPatternTotal">-</span> sinais
            </div>
          </div>
          <div id="worstPatternCard" class="stat-card" style="flex: 1; min-width: 200px; max-width: 300px; border: 2px solid #ff4444; background: linear-gradient(145deg, rgba(255,68,68,0.1), transparent);">
            <div class="stat-label" style="color: #ff4444;">‚ö†Ô∏è Evitar (7 dias)</div>
            <div class="stat-value" id="worstPatternName" style="font-size: 1.1rem; color: #ff4444;">-</div>
            <div style="font-size: 0.85rem; color: var(--text-secondary);">
              Taxa: <span id="worstPatternRate">-</span>% | <span id="worstPatternTotal">-</span> sinais
            </div>
          </div>
        </div>
      </section>

      <!-- Game iframe (embed) -->
      <section class="game-section">
        <div class="game-container">
          <!-- Some casinos block embedding via X-Frame-Options; add a fallback link below -->
          <div class="game-controls">
            <button id="reloadGameBtn" class="reload-btn">
              Recarregar jogo
            </button>
          </div>
          <iframe
            id="playnaIframe"
            src="https://playnabets.com/casino/soline/mobi_Dobrar"
            title="Playna Bets - Soline"
            loading="lazy"
            referrerpolicy="no-referrer"
            allowfullscreen></iframe>
        </div>
        <div
          style="
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
          ">
          Se o jogo n√£o carregar, abra em nova guia:
          <a
            href="https://playnabets.com/casino/soline/mobi_Dobrar"
            target="_blank"
            rel="noopener noreferrer"
            >Abrir Playna Bets</a
          >
        </div>
      </section>

      <!-- Cooldown Banner -->
      <section id="cooldownBanner" class="cooldown-banner" style="display: none; margin-bottom: 16px;">
        <div style="background: linear-gradient(135deg, #ff6b35, #f7931a); border-radius: 12px; padding: 16px 24px; text-align: center; box-shadow: 0 4px 20px rgba(255, 107, 53, 0.3);">
          <div style="display: flex; align-items: center; justify-content: center; gap: 12px; flex-wrap: wrap;">
            <span style="font-size: 2rem;">‚òï</span>
            <div>
              <div style="font-size: 1.1rem; font-weight: 700; color: white;">AGUARDE UM MOMENTO</div>
              <div style="font-size: 0.9rem; color: rgba(255,255,255,0.9);">Ap√≥s a perda, o sistema faz uma pausa para encontrar melhores oportunidades</div>
            </div>
            <div style="background: rgba(0,0,0,0.2); border-radius: 8px; padding: 8px 16px; min-width: 80px;">
              <div style="font-size: 1.5rem; font-weight: 700; color: white; font-family: monospace;" id="cooldownTimer">--:--</div>
              <div style="font-size: 0.7rem; color: rgba(255,255,255,0.7);">para voltar</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Sinal Atual -->
      <section class="signal-section" id="signalSection" style="display: block">
        <div class="signal-card" id="signalCard" tabindex="-1">
          <div class="signal-header">
            <span class="signal-badge" id="signalBadge">SINAL</span>
            <span class="signal-confidence" id="signalConfidence"></span>
          </div>
          <div
            class="signal-pending"
            id="signalPendingStatus"
            style="
              display: none;
              margin-top: 6px;
              font-weight: 600;
              color: #ff9800;
            ">
            Aguardando resolu√ß√£o...
          </div>
          <div class="signal-description" id="signalDescription">
            Analisando padr√µes, aguarde!
          </div>
          <div class="signal-details">
            <div class="signal-info">
              <strong>Aposta Sugerida:</strong>
              <div class="signal-bet-group">
                <span id="signalBet"></span>
                <span
                  id="signalColorSquare"
                  class="color-square"
                  style="display: none"></span>
              </div>
            </div>
            <div class="signal-info">
              <strong>N√∫meros:</strong>
              <span id="signalNumbers"></span>
            </div>
            <div class="signal-info">
              <strong>Probabilidade:</strong>
              <span id="signalProbability"></span>
            </div>
          </div>
          <!-- A√ß√£o sugerida removida: agora as sugest√µes num√©ricas n√£o s√£o exibidas -->
          <div class="signal-reasons" id="signalReasons"></div>
        </div>
      </section>

      <!-- Resultados Recentes -->
      <section class="results-section">
        <h2>Resultados Recentes</h2>
        <div class="results-scroll-container">
          <div class="results-grid" id="resultsGrid">
            <!-- Resultados ser√£o inseridos aqui via JavaScript -->
          </div>
        </div>
      </section>

      <!-- √öltimo acerto / √∫ltimo loss -->
      <section class="last-signal-times-section">
        <h2>√öltimo Resultado de Sinal</h2>
        <div class="times-grid">
          <div class="time-card">
            <div class="time-label">√öltimo Acerto</div>
            <div class="time-value" id="lastWinTime">-</div>
          </div>
          <div class="time-card">
            <div class="time-label">√öltimo Loss</div>
            <div class="time-value" id="lastLossTime">-</div>
          </div>
        </div>
      </section>

      <!-- Profit simulator removed -->

      <!-- Debug controls (removed) -->

      <!-- Hist√≥rico de Sinais removido para simplificar a interface -->
      <audio
        id="signalAlertSound"
        src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
        preload="auto"></audio>
    </div>

    <!-- Modal de Configura√ß√µes -->
    <div id="settingsModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="closeSettings">&times;</span>
        <h2>Configura√ß√µes de Alertas</h2>
        <form id="settingsForm">
          <div class="form-group">
            <label>
              <input type="checkbox" id="receiveAlerts" checked />
              Receber alertas
            </label>
          </div>
          <div class="form-group">
            <label>Cores habilitadas:</label>
            <div class="checkbox-group">
              <label
                ><input type="checkbox" id="colorRed" value="red" checked />
                Vermelho</label
              >
              <label
                ><input type="checkbox" id="colorBlack" value="black" checked />
                Preto</label
              >
              <label
                ><input type="checkbox" id="colorWhite" value="white" checked />
                Branco</label
              >
            </div>
          </div>
          <div class="form-group">
            <label for="enabledPatterns"
              >Padr√µes habilitados (separados por v√≠rgula, vazio =
              todos):</label
            >
            <input
              type="text"
              id="enabledPatterns"
              placeholder="ex: color_streak, alternation" />
          </div>
          <div class="form-group">
            <label for="maxAttempts">Tentativas por sinal:</label>
            <select id="maxAttempts" style="padding: 8px; border-radius: 6px; background: var(--bg-secondary); color: var(--text-primary); border: 1px solid var(--border-color); width: 100%;">
              <option value="3">3 tentativas (recomendado)</option>
              <option value="2">2 tentativas (mais conservador)</option>
            </select>
            <small style="color: var(--text-secondary); font-size: 0.8rem;">
              3 tentativas: ~85% win | 2 tentativas: ~72% win
            </small>
          </div>
          <button type="submit" class="btn-primary">Salvar</button>
        </form>
      </div>
    </div>

    <script src="app.js?v=2"></script>
    <div id="betSignupModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="closeBetSignup">&times;</span>
        <h2 class="modal-title">Cadastro na Casa de Apostas</h2>
        <p class="modal-description">
          Crie sua conta na Playna Bets para utilizar os sinais com a casa
          suportada.
        </p>
        <a
          href="https://playnabets.com/cadastro?refId=NjMzMTRyZWZJZA=="
          target="_blank"
          rel="noopener noreferrer"
          class="btn-primary"
          style="text-decoration: none"
          >Cadastrar na Playna Bets</a
        >
      </div>
    </div>
    <div id="infoModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" id="closeInfoModal">&times;</span>
        <h2 class="modal-title">Como usar o DBcolor</h2>
        <p class="modal-description">
          O sistema analisa resultados em tempo real e emite alertas de cor
          quando padr√µes s√£o detectados.
        </p>
        <ul style="color: #c0c8e0; margin: 0 0 14px 18px">
          <li>Espere um alerta e aposte na cor indicada.</li>
          <li>Use a prote√ß√£o ao Branco quando indicado.</li>
          <li>At√© 3 tentativas por sinal, com status "Tentativa X/3".</li>
        </ul>
        <p class="modal-description">
          Acompanhe os resultados recentes e o card de sinal para saber quando
          apostar.
        </p>
        <label
          style="
            display: flex;
            align-items: center;
            gap: 8px;
            color: #a0a8c8;
            margin: 10px 0 18px 0;
          ">
          <input type="checkbox" id="dontShowInfoAgain" />
          N√£o mostrar novamente
        </label>
        <button id="infoOkBtn" class="btn-primary">Entendi</button>
      </div>
    </div>
  </body>
</html>
